{% extends "acidentes/base.html" %}
{% load staticfiles %}

{% block conteudo %}
    <h3>Comparação entre UFs <small>Gráfico com comparação dos índices entre duas UFs</small></h3>
    <form action="/acidentes/compara_estados" method="post">
        <div class="row">
            <div class="small-3 column">
                <label for="uf1" class="right inline">Selecione uma UF</label>
            </div>
            <div class="small-2 column">
                <select name="uf1" id="uf1">
                    {% for uf in ufs %}
                        <option value="{{uf.sigla}}">{{uf.sigla}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="small-2 column">
                <label for="uf2" class="right inline">Comparar com</label>
            </div>
            <div class="small-2 column end">
                <select name="uf2" id="uf1">
                    {% for uf in ufs %}
                        <option value="{{uf.sigla}}">{{uf.sigla}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="row">
            <div class="small-3 column">
                <label for="ano" class="right inline">Ano</label>
            </div>
            <div class="small-2 columns end">
                <select name="ano">
                    {% for ano in anos %}
                    <option value="{{ano.ano}}"{% if ano.ano|slugify == ano_solicitado %} selected="selected"{% endif %}>{{ano.ano}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="small-4 columns end">
                <button type="submit" class="button radius tiny expand">Visualizar</button>
            </div>
        </div>
        {% csrf_token %}
    </form>
    {% if ufs_selecionadas %}
    <div class="row">
        <div id="chart_canvas" class="small-12 columns">
        <!-- placeholder for google maps -->
        </div>
    </div>
    {% else %}
    <div class="panel callout radius"> 
        <h5>Comparação entre UFs</h5> 
        <p>Selecione o ano e as duas UFs que deseja comparar, em seguida clique no botão Visualizar.</p> 
    </div>
    {% endif %}
{% endblock conteudo %}

{% block page_js %}
    {% if ufs_selecionadas %}
    {% load chartit %}
    {{ charts|load_charts:"chart_canvas" }}
    <script type="text/javascript" src="{% static "acidentes/js/highcharts.js" %}"></script>
    {% endif %}
{% endblock page_js %}