{% extends "acidentes/base.html" %}
{% load staticfiles %}

{% block conteudo %}
    <h3>Compare índices de duas UFs <small>Gráfico com comparativo dos índices entre duas UFs</small></h3>
    <form action="/acidentes/compara_estados" method="post">
        <div class="row">
            <div class="small-3 column">
                <label for="uf1" class="right inline">Selecione uma UF</label>
            </div>
            <div class="small-2 column">
                <select name="uf1" id="uf1">
                    {% for uf in ufs %}
                        <option value="{{uf.sigla}}"{% if uf.sigla == uf_1 %} selected="selected"{% endif %}>{{uf.sigla}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="small-2 column">
                <label for="uf2" class="right inline">Comparar com</label>
            </div>
            <div class="small-2 column">
                <select name="uf2" id="uf2">
                    {% for uf in ufs %}
                        <option value="{{uf.sigla}}"{% if uf.sigla == uf_2 %} selected="selected"{% endif %}>{{uf.sigla}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="small-3 columns end">
                <button type="submit" id="visualizar" class="button radius tiny expand">Visualizar</button>
            </div>
        </div>
        {% csrf_token %}
    </form>
    {% if ufs_selecionadas %}
    <div class="row">
        <div id="chart_canvas" class="small-12 columns">
        <!-- placeholder for google maps -->
        </div>
    </div>
    {% else %}
    <div class="panel callout radius"> 
        <h5>Comparativo entre UFs</h5> 
        <p>Selecione o ano e as duas UFs que deseja comparar, em seguida clique no botão Visualizar.</p> 
    </div>
    {% endif %}
{% endblock conteudo %}

{% block page_js %}
    {% if ufs_selecionadas %}
    {% load chartit %}
    {{ charts|load_charts:"chart_canvas" }}
    <script type="text/javascript" src="{% static "acidentes/js/highcharts.js" %}"></script>
    {% endif %}
    <script type="text/javascript">
    $(function(){
        $('#uf1, #uf2').change(function(){
            var value1 = $('#uf1').val();
            var value2 = $('#uf2').val();
            var btnVisualizar = $('#visualizar');
            if (value1 == value2) {
                btnVisualizar.attr('disabled', 'disabled');
            } else {
                btnVisualizar.removeAttr('disabled');
            }
        });
    });
    </script>
{% endblock page_js %}